---
---

<button class="page-mode-toggle" type="button" aria-label="Toggle color mode">
    <span class="mode-icon" aria-hidden="true">☀</span>
</button>

<script>
    (() => {
        const STORAGE_KEY = "portfolio-theme";
        const root = document.documentElement;
        const btn = document.querySelector(".page-mode-toggle");
        const icon = btn?.querySelector(".mode-icon");

        const applyTheme = (theme) => {
            if (!root) return;
            if (theme === "dark") {
                root.setAttribute("data-theme", "dark");
            } else {
                root.removeAttribute("data-theme");
            }
            if (icon) {
                icon.textContent = theme === "dark" ? "☾" : "☀";
            }
        };

        const stored =
            typeof window !== "undefined"
                ? window.localStorage.getItem(STORAGE_KEY)
                : null;
        applyTheme(stored === "dark" ? "dark" : "light");

        if (btn) {
            btn.addEventListener("click", () => {
                const isDark = root.getAttribute("data-theme") === "dark";
                const next = isDark ? "light" : "dark";
                applyTheme(next);
                if (typeof window !== "undefined") {
                    window.localStorage.setItem(STORAGE_KEY, next);
                }
            });
        }
    })();
</script>
